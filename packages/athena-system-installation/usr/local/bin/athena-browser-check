#!/bin/bash
#set -e
###############################################################################
# Author	:	Antonio Voza
###############################################################################
#
#   DO NOT JUST RUN THIS. EXAMINE AND JUDGE. RUN AT YOUR OWN RISK.
#
###############################################################################
echo
echo
echo "#################################"
echo "Start athena-browser-check"
echo "#################################"
echo

package=athena-brave-config
if pacman -Qq $package > /dev/null ; then
  if pacman -Qq athena-gnome-config > /dev/null ; then
    sed -i 's/{\\\\\"name\\\\\":\\\\\"Firefox ESR\\\\\",\\\\\"icon\\\\\":\\\\\"\\/usr\\/share\\/icons\\/hicolor\\/256x256\\/apps\\/firefox_logo_arch-256x256.png\\\\\",\\\\\"type\\\\\":\\\\\"Command\\\\\",\\\\\"data\\\\\":{\\\\\"command\\\\\":\\\\\"firefox-esr\\\\\"},\\\\\"angle\\\\\":-1}/{\\\\\"name\\\\\":\\\\\"Brave\\\\\",\\\\\"icon\\\\\":\\\\\"\\/usr\\/share\\/icons\\/hicolor\\/256x256\\/apps\\/brave-256x256.png\\\\\",\\\\\"type\\\\\":\\\\\"Command\\\\\",\\\\\"data\\\\\":{\\\\\"command\\\\\":\\\\\"brave\\\\\"},\\\\\"angle\\\\\":-1}/g' /usr/share/athena-gnome-config/dconf-shell.ini
  fi
fi

package=athena-firefox-config
if pacman -Qq $package > /dev/null ; then
  if pacman -Qq athena-gnome-config > /dev/null ; then
    sed -i 's/{\\\\\"name\\\\\":\\\\\"Brave\\\\\",\\\\\"icon\\\\\":\\\\\"\\/usr\\/share\\/icons\\/hicolor\\/256x256\\/apps\\/brave-256x256.png\\\\\",\\\\\"type\\\\\":\\\\\"Command\\\\\",\\\\\"data\\\\\":{\\\\\"command\\\\\":\\\\\"brave\\\\\"},\\\\\"angle\\\\\":-1}/{\\\\\"name\\\\\":\\\\\"Firefox ESR\\\\\",\\\\\"icon\\\\\":\\\\\"\\/usr\\/share\\/icons\\/hicolor\\/256x256\\/apps\\/firefox_logo_arch-256x256.png\\\\\",\\\\\"type\\\\\":\\\\\"Command\\\\\",\\\\\"data\\\\\":{\\\\\"command\\\\\":\\\\\"firefox-esr\\\\\"},\\\\\"angle\\\\\":-1}/g' /usr/share/athena-gnome-config/dconf-shell.ini
  fi
fi

package=athena-mullvad-config
if pacman -Qq $package > /dev/null ; then
  if pacman -Qq athena-gnome-config > /dev/null ; then
    sed -i 's/{\\\\\"name\\\\\":\\\\\"Firefox ESR\\\\\",\\\\\"icon\\\\\":\\\\\"\\/usr\\/share\\/icons\\/hicolor\\/256x256\\/apps\\/firefox_logo_arch-256x256.png\\\\\",\\\\\"type\\\\\":\\\\\"Command\\\\\",\\\\\"data\\\\\":{\\\\\"command\\\\\":\\\\\"firefox-esr\\\\\"},\\\\\"angle\\\\\":-1}/{\\\\\"name\\\\\":\\\\\"Mullvad\\\\\",\\\\\"icon\\\\\":\\\\\"\\/usr\\/share\\/icons\\/hicolor\\/128x128\\/apps\\/mullvad-browser.png\\\\\",\\\\\"type\\\\\":\\\\\"Command\\\\\",\\\\\"data\\\\\":{\\\\\"command\\\\\":\\\\\"mullvad-browser\\\\\"},\\\\\"angle\\\\\":-1}/g' /usr/share/athena-gnome-config/dconf-shell.ini
  fi
fi

echo
echo "#################################"
echo "End athena-browser-check"
echo "#################################"
echo