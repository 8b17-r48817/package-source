pkgname=athena-bspwm-config
_pkgname=bspwm
pkgver=8.32aa97f
pkgrel=1
pkgdesc="Bspwm configuration for Athena."
arch=('any')
url='https://github.com/Athena-OS/bspwm'
license=("GPL")
depends=('athena-alacritty-config' 'athena-nvim-config' 'athena-vim-config' 'athena-zsh' 'armcord-git' 'bat' 'bluez-utils' 'bluez' 'boo-sddm-git' 'brightnessctl' 'bspwm' 'btop' 'dunst' 'eww-git' 'feh' 'ffcast' 'ffmpegthumbnailer' 'geany' 'git' 'glfw-wayland' 'gnome-keyring' 'i3lock' 'imagemagick' 'jq' 'libwebp' 'lsd' 'maim' 'mlocate' 'mpc' 'mpd' 'ncmpcpp' 'net-tools' 'networkmanager' 'ntfs-3g' 'oh-my-zsh-git' 'openvpn' 'otf-droid-nerd' 'pacman-contrib' 'pamixer' 'papirus-icon-theme' 'pavucontrol' 'physlock' 'picom' 'playerctl' 'polkit-gnome' 'polybar' 'powerline' 'qt5-graphicaleffects' 'qt5-quickcontrols2' 'qt5-svg' 'qt5-wayland' 'ranger' 'rofi' 'scrot' 'sddm' 'sxhkd' 'tdrop' 'thunar' 'tokyonight-gtk-theme' 'ttf-hack-nerd' 'ttf-inconsolata' 'ttf-jetbrains-mono-nerd' 'ttf-jetbrains-mono' 'ttf-joypixels' 'ttf-terminus-nerd' 'ueberzug' 'vim-airline' 'vim-airline-themes' 'vundle-git' 'webp-pixbuf-loader' 'xclip' 'xdg-user-dirs' 'xdotool' 'xfce4-taskmanager' 'xorg-xinit' 'xorg-xkill' 'xorg-xlsclients' 'xorg-xprop' 'xorg-xrandr' 'xorg-xsetroot' 'xorg-xwayland' 'xorg-xwininfo' 'zoxide' 'zsh-theme-powerlevel10k')
makedepends=('git' 'rsync')
source=("git+https://github.com/Athena-OS/$_pkgname.git"
        "$pkgname.tar.gz")
sha512sums=('SKIP'
            'a06a96be570d3dd6a3860c01e68f219079b680f5a9a804c50755a9613c7daa7d2ecc6e83287bda547b449a84b6747e3c5278cd05b4d23b46a501ea47070d32b7')

pkgver() {
  cd $_pkgname

  echo $(git rev-list --count HEAD).$(git rev-parse --short HEAD)
}

package() {
  cd $_pkgname

  install -dm 755 "$pkgdir/etc/profile.d/"
  install -dm 755 "$pkgdir/etc/skel/.config/gtk-3.0"
  install -dm 755 "$pkgdir/etc/skel/.local/bin"
  install -dm 755 "$pkgdir/etc/skel/.local/share/applications"
  install -dm 755 "$pkgdir/etc/skel/.local/share/fonts"
  install -dm 755 "$pkgdir/etc/systemd/system/multi-user.target.wants"
  install -dm 755 "$pkgdir/etc/systemd/system/sockets.target.wants"
  
  rsync -av --progress .config/ "$pkgdir/etc/skel/.config/"
  rsync -av --progress .p10k.zsh "$pkgdir/etc/skel/.p10k.zsh"
  rsync -av --progress .local/share/applications/ "$pkgdir/etc/skel/.local/share/applications/"
  rsync -av --progress .local/share/asciiart/ "$pkgdir/etc/skel/.local/share/asciiart/"
  rsync -av --progress .local/bin/ "$pkgdir/etc/skel/.local/bin/"
  rsync -av --progress .local/share/fonts/ "$pkgdir/etc/skel/.local/share/fonts/"

  cp -P "$srcdir/mpd.service" "$pkgdir/etc/systemd/system/multi-user.target.wants/"
  cp -P "$srcdir/mpd.socket" "$pkgdir/etc/systemd/system/sockets.target.wants/"
}
