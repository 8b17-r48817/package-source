pkgname=athena-bspwm-config
_pkgname=dotfiles
pkgver=26.a6ce32b
pkgrel=1
pkgdesc="Bspwm configuration for Athena."
arch=('any')
url='https://codeberg.org/expansion/dotfiles'
license=("GPL")
depends=('alacritty' 'armcord-git' 'base-devel' 'bat' 'bluez-utils' 'bluez' 'boo-sddm-git' 'brightnessctl' 'bspwm' 'btop' 'dunst' 'eww-git' 'feh' 'ffcast' 'ffmpegthumbnailer' 'geany' 'git' 'glfw-wayland' 'gnome-keyring' 'i3lock' 'imagemagick' 'jq' 'libwebp' 'lsd' 'maim' 'mlocate' 'mpc' 'mpd' 'ncmpcpp' 'net-tools' 'networkmanager' 'ntfs-3g' 'oh-my-zsh-git' 'openvpn' 'otf-droid-nerd' 'pacman-contrib' 'pamixer' 'papirus-icon-theme' 'pavucontrol' 'physlock' 'picom' 'playerctl' 'polkit-gnome' 'polybar' 'powerline' 'qt5-graphicaleffects' 'qt5-quickcontrols2' 'qt5-svg' 'qt5-wayland' 'ranger' 'rofi' 'scrot' 'sddm' 'sxhkd' 'tdrop' 'thunar' 'tokyonight-gtk-theme' 'ttf-hack-nerd' 'ttf-inconsolata' 'ttf-jetbrains-mono-nerd' 'ttf-jetbrains-mono' 'ttf-joypixels' 'ttf-terminus-nerd' 'ueberzug' 'vim-airline' 'vim-airline-themes' 'vundle' 'webp-pixbuf-loader' 'xclip' 'xdg-user-dirs' 'xdotool' 'xfce4-taskmanager' 'xorg-xinit' 'xorg-xkill' 'xorg-xlsclients' 'xorg-xprop' 'xorg-xrandr' 'xorg-xsetroot' 'xorg-xwayland' 'xorg-xwininfo' 'zoxide' 'zsh-autosuggestions' 'zsh-history-substring-search' 'zsh-syntax-highlighting' 'zsh-theme-powerlevel10k')
makedepends=('git' 'rsync')
source=("git+https://codeberg.org/expansion/$_pkgname"
        "$pkgname.tar.gz")
sha512sums=('SKIP'
            'f5512b60a37600b0e606a7712e365bd03474afe319e3cb1a918bf3e854ca9e1bd0490c06e5ef5d1da853f9605508a96b1d7224406066561c68db27963d50152c')

pkgver() {
  cd $_pkgname

  echo $(git rev-list --count HEAD).$(git rev-parse --short HEAD)
}

package() {
  cd $_pkgname

  install -dm 755 "$pkgdir/etc/profile.d/"
  install -dm 755 "$pkgdir/etc/skel/.config/gtk-3.0"
  install -dm 755 "$pkgdir/etc/skel/.local/bin"
  install -dm 755 "$pkgdir/etc/skel/.local/share/applications"
  install -dm 755 "$pkgdir/etc/skel/.local/share/fonts"
  install -dm 755 "$pkgdir/etc/systemd/system/multi-user.target.wants"
  install -dm 755 "$pkgdir/etc/systemd/system/sockets.target.wants"
  
  #rsync -av --progress ./.config/dunst "$pkgdir/etc/skel/.config/"
  rsync -av --progress ./config/ "$pkgdir/etc/skel/.config/"
  rsync -av --progress ./home/.p10k.zsh "$pkgdir/etc/skel/.p10k.zsh"
  rsync -av --progress ./home/.vimrc "$pkgdir/etc/skel/.vimrc"
  rsync -av --progress ./home/.zshrc "$pkgdir/etc/skel/.zshrc"
  rsync -av --progress ./misc/applications/ "$pkgdir/etc/skel/.local/share/applications/"
  rsync -av --progress ./misc/bin/ "$pkgdir/etc/skel/.local/bin/"
  rsync -av --progress ./misc/fonts/ "$pkgdir/etc/skel/.local/share/fonts/"
  rsync -av --progress ./misc/settings.ini "$pkgdir/etc/skel/.config/gtk-3.0/"

  cp -P "$srcdir/mpd.service" "$pkgdir/etc/systemd/system/multi-user.target.wants/"
  cp -P "$srcdir/mpd.socket" "$pkgdir/etc/systemd/system/sockets.target.wants/"
}
